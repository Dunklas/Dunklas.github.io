<!doctype html><html lang=en-us><head><title>Introducing tower-oauth2-resource-server // </title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.145.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Rickard Andersson"><meta name=description content><link rel=stylesheet href=/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Introducing tower-oauth2-resource-server"><meta name=twitter:description content="TLDR: I’ve built a middleware for handling JWT authorization. It’s written for the Rust ecosystem and supports many popular web frameworks such as axum, salvo and tonic. It’s called tower-oauth2-resource-server and you can find the source code on github. Feel free to use and contribute!
Over the last few months, I’ve delved into the art of writing a REST API using Rust. Specifically, I’ve used the axum crate to do so. Like most projects, mine eventually needed authorization. A way to validate incoming JSON Web Tokens (JWTs) from an external identity provider."><meta property="og:url" content="https://dunklas.github.io/posts/coding/introducing-tower-oauth2-resource-server/"><meta property="og:title" content="Introducing tower-oauth2-resource-server"><meta property="og:description" content="TLDR: I’ve built a middleware for handling JWT authorization. It’s written for the Rust ecosystem and supports many popular web frameworks such as axum, salvo and tonic. It’s called tower-oauth2-resource-server and you can find the source code on github. Feel free to use and contribute!
Over the last few months, I’ve delved into the art of writing a REST API using Rust. Specifically, I’ve used the axum crate to do so. Like most projects, mine eventually needed authorization. A way to validate incoming JSON Web Tokens (JWTs) from an external identity provider."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-07T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-07T00:00:00+00:00"><meta property="article:tag" content="Rust"><meta property="article:tag" content="Tower"><meta property="article:tag" content="OAuth"><meta property="article:tag" content="Jwt"><meta property="article:tag" content="Authorization"></head><body><header class=app-header><a href=/><img class=app-header-avatar src=/kittelsen.jpg alt="Rickard Andersson"></a>
<span class=app-header-title></span><p></p></header><main class=app-container><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><style type=text/css>img[src$='#center']{display:block;margin:1rem auto;max-width:100%;height:auto}</style><article class=post><header class=post-header><h1 class=post-title>Introducing tower-oauth2-resource-server</h1><div class=post-meta><div><svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Mar 7, 2025</div><div><svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
2 min read</div><div><svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://dunklas.github.io/tags/rust/>Rust</a>
<a class=tag href=https://dunklas.github.io/tags/tower/>Tower</a>
<a class=tag href=https://dunklas.github.io/tags/oauth/>OAuth</a>
<a class=tag href=https://dunklas.github.io/tags/jwt/>Jwt</a>
<a class=tag href=https://dunklas.github.io/tags/authorization/>Authorization</a></div></div></header><div class=post-content><p><strong>TLDR:</strong> I&rsquo;ve built a middleware for handling JWT authorization.
It&rsquo;s written for the Rust ecosystem and supports many popular web frameworks such as <a href=https://crates.io/crates/axum target=_blank rel=noopener>axum</a>, <a href=https://crates.io/crates/salvo/ target=_blank rel=noopener>salvo</a> and <a href=https://crates.io/crates/tonic target=_blank rel=noopener>tonic</a>.
It&rsquo;s called <strong>tower-oauth2-resource-server</strong> and you can find the source code on <a href=https://github.com/Dunklas/tower-oauth2-resource-server target=_blank rel=noopener>github</a>.
Feel free to use and contribute!</p><hr><p>Over the last few months, I&rsquo;ve delved into the art of writing a REST API using Rust.
Specifically, I&rsquo;ve used the <a href=https://crates.io/crates/axum target=_blank rel=noopener>axum</a> crate to do so.
Like most projects, mine eventually needed authorization.
A way to validate incoming JSON Web Tokens (JWTs) from an external identity provider.</p><p>In my daily job (where I work with Java and Spring) my go-to-solution for authorization is to use <a href=https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server target=_blank rel=noopener>Spring Security OAuth2 Resource Server</a>.
That library makes things easy — you simply specify an issuer URL, and it takes care of discovering JSON Web Key Sets (JWKS), handling key rotation, and validating JWTs.
However, I couldn&rsquo;t find an equivalent Rust library that offered the same level of simplicity.
So, I decided to build one myself.</p><p>My objective was to write a middleware that intercepts incoming requests, validates their JWTs, and either allows or rejects them based on validity.
In the Rust ecosystem there is a crate called <a href=https://crates.io/crates/tower target=_blank rel=noopener>tower</a> which provides an abstraction for the concept of taking a request and returning a response.
It can be used for implementing middleware in both clients and servers, regardless of networking protocol.
Many web frameworks (including Axum) use Tower instead of implementing their own middleware systems.
With that in mind, I decided to write my middleware for Tower, ensuring it could be used across multiple web frameworks.</p><p>So, I hereby introduce <strong>tower-oauth2-resource-server</strong>!
The library is highly inspired by <a href=https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server target=_blank rel=noopener>Spring Security OAuth2 Resource Server</a> and some of its features include:</p><ul><li>JWT validation for incoming HTTP requests<ul><li>Signature matches public key from JWKS endpoint</li><li>Validity of <code>exp</code>, <code>nbf</code>, <code>iss</code> and <code>aud</code> claims</li></ul></li><li>Automatic discovery and rotation of JWKS</li><li>Expose JWT claims to downstream services via a <a href=https://docs.rs/http/latest/http/struct.Extensions.html target=_blank rel=noopener>Request extension</a></li></ul><p>It should be possible to use the library together with any web framework built on top of <a href=https://crates.io/crates/tower target=_blank rel=noopener>tower</a>.
However, I&rsquo;ve only verified that it works together with <a href=https://crates.io/crates/axum target=_blank rel=noopener>axum</a>, <a href=https://crates.io/crates/salvo/ target=_blank rel=noopener>salvo</a> and <a href=https://crates.io/crates/tonic target=_blank rel=noopener>tonic</a>.</p><p>The library is available on <a href=https://crates.io/crates/tower-oauth2-resource-server target=_blank rel=noopener>crates.io</a>, and you can find the source code on <a href=https://github.com/Dunklas/tower-oauth2-resource-server target=_blank rel=noopener>github</a>.
You can find <strong>usage examples</strong> for different web frameworks in the <a href=https://github.com/Dunklas/tower-oauth2-resource-server/tree/main/examples target=_blank rel=noopener>examples</a> folder of the repository.</p><p>Feel free to use and contribute!</p></div><div class=post-footer></div></article></main></body></html>